<script>
  var interval = null
  var retries = 0
  function renderBablicWidget(languages) {
    if (languages.length) {
      if (interval) {
        clearInterval(interval)
      }
      var container = document.getElementById('bablic-languages-container')
      var ul = document.getElementById('bablic-languages')
      if (container && ul) {
        languages.forEach((language) => {
          var li = document.createElement('li')
          var a = document.createElement('a')
          a.href = language.href
          a.innerText = language.name
          li.appendChild(a)
          ul.appendChild(li)
        })
        var title = document.getElementById('bablic-languages-title')
        var locale = window.bablic.getLocale()
        if (title && locale) {
          title.innerText = locale.toUpperCase()
        }
        container.style.display = 'flex'
      }
    }
  }
  document.addEventListener('bablicload', function() {
    renderBablicWidget(window.bablic.languages.get())
  })
  if (window.bablic) {
    renderBablicWidget(window.bablic.languages.get())
    window.bablic.on('done', function() {
      renderBablicWidget(window.bablic.languages.get())
    })
  } else {
    interval = setInterval(() => {
      if (retries < 5) {
        renderBablicWidget(window.bablic.languages.get())
        retries++
      } else {
        if (interval) {
          clearInterval(interval)
        }
      }
    }, 500)
  }
</script>
<script src="//d.bablic.com/snippet/5c76e669cd0fe00001dc6aa4.js?version=3.9"></script>
